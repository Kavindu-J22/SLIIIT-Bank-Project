<!-- src/main/resources/templates/transaction-history.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:include="layout :: layout">
<head>
    <title>SLIIT Bank - Transaction History</title>
</head>
<body>
    <div th:fragment="content">
        <h2 class="text-xl font-bold mb-4 text-blue-600">Transaction History</h2>
        <a href="/transaction/export/csv" class="bg-green-500 text-white p-2 rounded mb-4 inline-block hover:bg-green-600">Export to CSV</a>
        <table class="w-full border-collapse border border-gray-300">
            <thead>
                <tr class="bg-gray-200">
                    <th class="p-2">Amount</th>
                    <th class="p-2">Type</th>
                    <th class="p-2">Date</th>
                    <th class="p-2">Description</th>
                    <th class="p-2" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="transaction : ${transactions}" class="hover:bg-gray-100">
                    <td class="p-2" th:text="${transaction.amount}"></td>
                    <td class="p-2" th:text="${transaction.type}"></td>
                    <td class="p-2" th:text="${transaction.date}"></td>
                    <td class="p-2" th:text="${transaction.description}"></td>
                    <td class="p-2" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
                        <a th:href="@{/transaction/reverse/{id}(id=${transaction.id})}" class="text-red-500 hover:underline" onclick="return confirm('Are you sure?')">Reverse</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>